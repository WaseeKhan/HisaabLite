<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Billing - HisaabLite</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
body {
    margin:0;
    font-family:'Poppins',sans-serif;
    background:#f4f6f9;
    padding:30px;
}

.container {
    background:white;
    padding:25px;
    border-radius:12px;
    box-shadow:0 6px 20px rgba(0,0,0,0.08);
}

h2 {
    margin-bottom:20px;
}

.form-row {
    display:flex;
    gap:10px;
    margin-bottom:20px;
}

select, input {
    padding:10px;
    border:1px solid #ddd;
    border-radius:8px;
    flex:1;
}

button {
    padding:10px 15px;
    border:none;
    border-radius:8px;
    background:#2563eb;
    color:white;
    cursor:pointer;
}

button:hover {
    background:#1e40af;
}

table {
    width:100%;
    border-collapse:collapse;
    margin-top:20px;
}

th {
    background:#111827;
    color:white;
    padding:10px;
}

td {
    padding:10px;
    border-bottom:1px solid #eee;
    text-align:center;
}

.total-row {
    font-weight:bold;
}

.success {
    background:#dcfce7;
    color:#166534;
    padding:8px;
    border-radius:6px;
    margin-bottom:10px;
}

.error {
    background:#fee2e2;
    color:#b91c1c;
    padding:8px;
    border-radius:6px;
    margin-bottom:10px;
}

.top-actions {
    display:flex;
    justify-content:space-between;
    margin-bottom:15px;
}
</style>
</head>

<body>

<div class="container">

<div class="top-actions">
<h2>ðŸ§¾ New Sale</h2>
<a th:href="@{/dashboard}"><button>â¬… Dashboard</button></a>
</div>

<div th:if="${success}" class="success" th:text="${success}"></div>
<div th:if="${error}" class="error" th:text="${error}"></div>

<form th:action="@{/sales/add}" method="post">
<div class="form-row">
<select name="productId">
<option th:each="product : ${products}" 
        th:value="${product.id}" 
        th:text="|${product.name} - â‚¹${product.price}|">
</option>
</select>

<input type="number" name="quantity" min="1" value="1" required />

<button type="submit">Add</button>
</div>
</form>

<h3>Cart</h3>

<table th:if="${cart != null and cart.size() > 0}">
<tr>
<th>#</th>
<th>Product</th>
<th>Price</th>
<th>Qty</th>
<th>Subtotal</th>
<th>Action</th>
</tr>

<tr th:each="item, stat : ${cart}">
<td th:text="${stat.index + 1}"></td>
<td th:text="${item.productName}"></td>
<td th:text="${item.price}"></td>
<td th:text="${item.quantity}"></td>
<td th:text="${item.subtotal}"></td>
<td>
<a th:href="@{/sales/remove/{index}(index=${stat.index})}">
<button>Remove</button>
</a>
</td>
</tr>

<tr class="total-row">
<td colspan="4" style="text-align:right;">Total</td>
<td colspan="2" th:text="${totalAmount}"></td>
</tr>
</table>

<form th:action="@{/sales/complete}" method="post" style="margin-top:20px;">
<button type="submit">Complete Sale</button>
</form>

</div>

</body>
</html>